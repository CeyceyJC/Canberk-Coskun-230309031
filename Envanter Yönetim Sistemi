//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public interface Storable {
    String toCSVRow();
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public class Supplier {

    private String supplierId;
    private String name;
    private String email;
    private String phone;

    public Supplier(String supplierId, String name, String email, String phone) {
        this.supplierId = supplierId;
        this.name = name;
        this.email = email;
        this.phone = phone;
    }

    public String getSupplierId() {
        return supplierId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public abstract class Product {
    private String id;
    private String name;
    private double unitPrice;
    private int quantity;

    public Product(String id, String name, double unitPrice, int quantity) {
        this.id = id;
        this.name = name;
        this.unitPrice = unitPrice;
        this.quantity = quantity;
    }

    public abstract String getTypeCode();
    public String getExpiryDate() { return ""; }

    public String getId() { return id; }
    public String getName() { return name; }
    public double getUnitPrice() { return unitPrice; }
    public int getQuantity() { return quantity; }

    public void setName(String name) { this.name = name; }
    public void setUnitPrice(double unitPrice) { this.unitPrice = unitPrice; }
    public void setQuantity(int quantity) { this.quantity = quantity; }

    public void addStock(int amount) {
        quantity += amount;
    }

    public boolean reduceStock(int amount) {
        if (quantity >= amount) {
            quantity -= amount;
            return true;
        }
        return false;
    }

    public String stockWarning() {
        if (quantity < 5) return "!!! KRITIK STOK (5'ten az) !!!";
        if (quantity < 10) return "!! AZ STOK (10'dan az) !!";
        return "";
    }

    @Override
    public String toString() {
        String exp = getExpiryDate();
        String expText = exp.equals("") ? "" : (" | SKT: " + exp);
        String warn = stockWarning();
        String warnText = warn.equals("") ? "" : (" | " + warn);

        return getId() + " (" + getTypeCode() + ") - " + getName()
                + " | Fiyat: " + getUnitPrice()
                + " | Adet: " + getQuantity()
                + expText
                + warnText;
    }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public class NormalProduct extends Product {

    public NormalProduct(String id, String name, double unitPrice, int quantity) {
        super(id, name, unitPrice, quantity);
    }

    @Override
    public String getTypeCode() {
        return "NP";
    }

    @Override
    public String toCSVRow() {
        return getId() + "," + getTypeCode() + "," + getName() + "," + getUnitPrice() + "," + getQuantity() + ",";
    }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public class PerishableProduct extends Product {
    private String expiryDate;

    public PerishableProduct(String id, String name, double unitPrice, int quantity, String expiryDate) {
        super(id, name, unitPrice, quantity);
        this.expiryDate = expiryDate;
    }

    @Override
    public String getTypeCode() {
        return "PP";
    }

    @Override
    public String getExpiryDate() {
        return expiryDate;
    }

    public void setExpiryDate(String expiryDate) {
        this.expiryDate = expiryDate;
    }

    @Override
    public String toCSVRow() {
        return getId() + "," + getTypeCode() + "," + getName() + "," + getUnitPrice() + "," + getQuantity() + "," + expiryDate;
    }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

public class Order {
    private String date;
    private String type;
    private String productId;
    private String productName;
    private int quantity;
    private double unitPrice;
    private double total;
    private String supplierName;

    public Order(String date, String type, String productId, String productName,
                 int quantity, double unitPrice, String supplierName) {
        this.date = date;
        this.type = type;
        this.productId = productId;
        this.productName = productName;
        this.quantity = quantity;
        this.unitPrice = unitPrice;
        this.total = quantity * unitPrice;
        this.supplierName = supplierName;
    }

    public String getDate() { return date; }
    public String toCSVRow() {
        return date + "," + type + "," + productId + "," + productName + "," + quantity + "," + unitPrice + "," + total + "," + supplierName;
    }

    public void printReceipt() {
        System.out.println("\n==============================");
        System.out.println(type.equals("BUY") ? "         ALIS FISI" : "         SATIS FISI");
        System.out.println("------------------------------");
        System.out.println("Tarih       : " + date);
        System.out.println("Urun ID     : " + productId);
        System.out.println("Urun Adi    : " + productName);
        System.out.println("Adet        : " + quantity);
        System.out.println("Birim Fiyat : " + unitPrice);
        System.out.println("Toplam      : " + total);
        System.out.println("Tedarikci   : " + supplierName);
        System.out.println("==============================\n");
    }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
